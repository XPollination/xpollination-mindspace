# =============================================================================
# Mindspace Mock-up — Simulating the product before building it
#
# This YAML represents what the mindmap data would look like if the mindspace
# tool existed. Two projects live in the same mindspace: the mindspace itself
# and the MCP server. Each node is a "self-aware container" carrying its own
# DoR, DoD, and process state.
#
# Purpose: Iterate on this simulation as if the product exists. Learn from
# the experience. Then build the first real iteration informed by that learning.
#
# Created: 2026-02-02 (Iteration 4)
# Schema audit: 2026-02-02 — All nodes now follow Vision PDSA Section 4.1
#   unified node schema. Every node has pdsa_ref, pdsa_phase, DoR, DoD.
# =============================================================================

meta:
  title: "XPollination Mindspace"
  last_updated: "2026-02-02T18:00:00Z"
  updated_by: "pdsa-agent"
  version: "0.2.0-mockup"
  active_node: "ms-node-schema"
  scope_stack:
    - "root"
    - "mindspace"
    - "ms-requirements"
    - "ms-node-schema"

  agents:
    thomas:
      display: "Thomas"
      color: "amber"
      role: "Strategic direction, approval, Definition of Done verifier"
    orchestrator:
      display: "Orchestrator"
      color: "indigo"
      role: "Coordination, relay, quality gates, focus enforcement"
    pdsa-agent:
      display: "PDSA"
      color: "violet"
      role: "Planning, research, PDSA documentation, quality review"
    dev-agent:
      display: "Dev"
      color: "emerald"
      role: "Implementation, git commits, operational execution"

# =============================================================================
# THE MINDMAP TREE
#
# Schema reminder (Vision PDSA Section 4.1): Every node MUST have:
#   id, title, owner, type, status, pdsa_phase, pdsa_ref,
#   definition_of_ready, definition_of_done, children
# =============================================================================

tree:
  - id: "root"
    title: "XPollination Mindspace"
    owner: "thomas"
    type: "task"
    status: "active"
    pdsa_phase: null
    pdsa_ref: null  # Root of the mindspace — no dedicated PDSA
    definition_of_ready:
      context: "Thomas has defined the project scope: a mindmap-based project management tool for human-agent alignment."
      inputs: []
      status: "ready"
    definition_of_done:
      action: "All child projects (mindspace tool, MCP server) reach their Definition of Done."
      acceptance: "Thomas confirms the mindspace system is operational and useful."
      quality_gates:
        - name: "All child projects complete"
          status: "pending"
          verifier: "thomas"
      outputs:
        - type: "state"
          description: "Operational mindspace system"
      status: "not_done"
    children:

      # =====================================================================
      # PROJECT 1: MINDSPACE (the tool itself)
      # =====================================================================
      - id: "mindspace"
        title: "xpollination-mindspace"
        owner: "orchestrator"
        type: "task"
        status: "active"
        pdsa_phase: "plan"
        pdsa_ref:
          git_url: "https://github.com/PichlerThomas/xpollination-mindspace"
          local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace"
        definition_of_ready:
          context: "Vision PDSA approved. Grammar phase in progress — answering questions before implementation."
          inputs:
            - from: "ms-vision"
              type: "file"
              description: "Approved vision PDSA"
              path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
          status: "ready"
        definition_of_done:
          action: "Complete all requirements, features, and infrastructure for the mindspace tool."
          acceptance: "Mindspace is operational — MCP state machine enforces process, agents interact via tools."
          quality_gates:
            - name: "All requirement questions answered"
              status: "pending"
              verifier: "pdsa-agent"
            - name: "MCP state machine operational"
              status: "pending"
              verifier: "dev-agent"
            - name: "Thomas can use the system"
              status: "pending"
              verifier: "thomas"
          outputs:
            - type: "state"
              description: "Operational mindspace tool"
          status: "not_done"
        children:

          # --- REQUIREMENTS ---
          - id: "ms-requirements"
            title: "Requirements"
            owner: "pdsa-agent"
            type: "task"
            status: "active"
            pdsa_phase: "plan"
            pdsa_ref:
              git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
              local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
            definition_of_ready:
              context: "Thomas has described the mindmap vision. Trivium Method provides the thinking framework. We are in Grammar phase — gathering and structuring all requirements."
              inputs: []
              status: "ready"
            definition_of_done:
              action: "Explore each requirement via PDSA cycles until sufficient understanding to begin building."
              acceptance: "All requirement nodes have status complete. Thomas approves the requirements as sufficient for a first implementation."
              quality_gates:
                - name: "All requirement questions answered with PDSA cycles"
                  status: "pending"
                  verifier: "pdsa-agent"
                - name: "Thomas confirms requirements are sufficient to start building"
                  status: "pending"
                  verifier: "thomas"
              outputs:
                - type: "analysis"
                  description: "Complete set of answered requirements ready for Feature/Infrastructure work"
              status: "not_done"
            children:

              - id: "ms-vision"
                title: "What is the mindspace vision?"
                owner: "pdsa-agent"
                type: "pdsa-cycle"
                status: "complete"
                pdsa_phase: "complete"
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                definition_of_ready:
                  context: "Thomas described the core metaphor (mindmap as shared mental model), the Trivium Method, and the self-aware node concept."
                  inputs:
                    - from: "thomas-input"
                      type: "analysis"
                      description: "Thomas's vision answers captured in /tmp/orchestrator-task-mindspace.md"
                  status: "ready"
                definition_of_done:
                  action: "Create a vision PDSA that synthesizes Thomas's mindmap metaphor with the v3 recursive tree design. Iterate with Thomas until aligned."
                  acceptance: "Thomas approves the vision PDSA as matching his intent."
                  quality_gates:
                    - name: "Node schema with intrinsic DoR/DoD"
                      status: "pass"
                      verifier: "pdsa-agent"
                    - name: "Trivium Method documented"
                      status: "pass"
                      verifier: "pdsa-agent"
                    - name: "Self-aware node concept with logistics analogy"
                      status: "pass"
                      verifier: "pdsa-agent"
                    - name: "Three-actor model (node/infrastructure/agent)"
                      status: "pass"
                      verifier: "pdsa-agent"
                    - name: "Thomas approves vision"
                      status: "pass"
                      verifier: "thomas"
                  outputs:
                    - type: "file"
                      description: "Vision PDSA document"
                      path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  status: "done"

              - id: "ms-node-schema"
                title: "What is the exact node schema?"
                owner: "pdsa-agent"
                type: "task"
                status: "active"
                pdsa_phase: "plan"
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  # Specified in: Vision PDSA Section 4.1 (Unified Node Schema)
                definition_of_ready:
                  context: "Vision PDSA Section 4.1 defines a draft schema. Needs validation through simulation. Grammar phase questions Q1-Q6 address open schema decisions."
                  inputs:
                    - from: "ms-vision"
                      type: "file"
                      description: "Vision PDSA with draft node schema"
                      path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  status: "ready"
                definition_of_done:
                  action: "Validate the node schema by using it in this mock-up. Identify gaps, iterate."
                  acceptance: "Schema is sufficient to represent all current mindspace nodes with full DoR/DoD. No fields missing."
                  quality_gates:
                    - name: "Mock-up uses schema correctly for all nodes"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "Thomas confirms schema captures his mental model"
                      status: "pending"
                      verifier: "thomas"
                  outputs:
                    - type: "analysis"
                      description: "Validated node schema (or schema revision)"
                  status: "not_done"

              - id: "ms-state-machine"
                title: "How does the node state machine work?"
                owner: "pdsa-agent"
                type: "task"
                status: "active"
                pdsa_phase: "plan"
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/blob/main/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  # Specified in: MCP Infra PDSA Section 4 (State Machine: Node Lifecycle)
                definition_of_ready:
                  context: "MCP Server PDSA Section 4 defines a draft state machine. Needs validation. Grammar phase questions Q7-Q11 address open state machine decisions."
                  inputs:
                    - from: "mcp-infra-pdsa"
                      type: "file"
                      description: "MCP server infrastructure PDSA with state machine design"
                      path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  status: "ready"
                definition_of_done:
                  action: "Walk through the state machine with this mock-up's nodes. Verify every transition is valid and no edge cases are missing."
                  acceptance: "State machine handles all node lifecycle scenarios in the mock-up."
                  quality_gates:
                    - name: "All nodes in mock-up have a valid status per state machine"
                      status: "pending"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "analysis"
                      description: "Validated state machine (or revision)"
                  status: "not_done"

              - id: "ms-dual-links"
                title: "How do dual-links work across repos?"
                owner: "pdsa-agent"
                type: "task"
                status: "complete"
                pdsa_phase: "complete"
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  # Specified in: Vision PDSA Section 5 (The Dual-Link Pattern)
                definition_of_ready:
                  context: "Need a pattern for referencing content across repos that works for both humans (GitHub URLs) and agents (filesystem paths)."
                  inputs: []
                  status: "ready"
                definition_of_done:
                  action: "Define the dual-link pattern with concrete examples."
                  acceptance: "Pattern is documented in vision PDSA with YAML examples."
                  quality_gates:
                    - name: "Dual-link schema defined"
                      status: "pass"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "analysis"
                      description: "Dual-link pattern documented in vision PDSA Section 5"
                  status: "done"

              - id: "ms-req-traceability"
                title: "How do we link requirements to code for impact analysis?"
                owner: "pdsa-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  # Specified in: Vision PDSA Section 13.1 (Q16 — MVP Scope)
                definition_of_ready:
                  context: "Thomas identified (Q16, Vision PDSA Section 13.1) that code must link back to PDSAs/requirements so changes can be traced to their impact. This enables quality iteration — change something, know what's affected, test what matters."
                  inputs:
                    - from: "ms-node-schema"
                      type: "analysis"
                      description: "Finalized node schema (traceability attaches to nodes)"
                  status: "not_ready"
                definition_of_done:
                  action: "Define the traceability pattern: how code files/functions link to requirement nodes, how impact analysis works when a requirement changes."
                  acceptance: "Pattern is documented with concrete examples. A requirement change can be traced to affected code. A code change can be traced to its originating requirement."
                  quality_gates:
                    - name: "Traceability pattern documented with examples"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "Thomas confirms pattern captures his intent"
                      status: "pending"
                      verifier: "thomas"
                  outputs:
                    - type: "analysis"
                      description: "Requirements-to-code traceability pattern"
                  status: "not_done"

          # --- FEATURES (DEPRIORITIZED per Q17 — visualization comes after MCP enforcement) ---
          - id: "ms-features"
            title: "Features (DEPRIORITIZED — dashboard comes after MCP enforcement)"
            owner: "pdsa-agent"
            type: "task"
            status: "pending"
            pdsa_phase: null
            pdsa_ref:
              git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
              local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
              # Specified in: Vision PDSA Section 6 (Graph Traversal and Node Rearrangement)
            definition_of_ready:
              context: "Features can be defined after Requirements are sufficiently explored. DEPRIORITIZED per Q17 (Vision PDSA Section 13.2): MCP enforcement first, visualization later."
              inputs:
                - from: "ms-requirements"
                  type: "analysis"
                  description: "Completed requirements analysis"
              status: "not_ready"
            definition_of_done:
              action: "Define each feature as a node with its own DoR/DoD. Create PDSAs for complex features."
              acceptance: "All features specified, prioritized, and ready for implementation."
              quality_gates:
                - name: "Each feature has a clear DoD"
                  status: "pending"
                  verifier: "pdsa-agent"
                - name: "Thomas approves feature set"
                  status: "pending"
                  verifier: "thomas"
              outputs:
                - type: "analysis"
                  description: "Feature specifications ready for dev agent"
              status: "not_done"
            children:

              - id: "ms-feat-graph-traversal"
                title: "Graph traversal (navigate full tree)"
                owner: "dev-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  # Specified in: Vision PDSA Section 6.1 (Traversal)
                definition_of_ready:
                  context: "Scope stack navigation, expand/collapse, breadcrumb. Defined in Vision PDSA Section 6.1."
                  inputs:
                    - from: "ms-node-schema"
                      type: "analysis"
                      description: "Finalized node schema"
                  status: "not_ready"
                definition_of_done:
                  action: "Implement tree rendering with expand/collapse and scope stack breadcrumb."
                  acceptance: "User can navigate from root to any leaf and back. Scope stack updates on navigation."
                  quality_gates:
                    - name: "Tree renders at any depth"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "Breadcrumb navigation works"
                      status: "pending"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "file"
                      description: "Dashboard template with recursive tree renderer"
                  status: "not_done"

              - id: "ms-feat-drag-drop"
                title: "Drag-and-drop (rearrange thoughts)"
                owner: "dev-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  # Specified in: Vision PDSA Section 6.2 (Node Rearrangement)
                definition_of_ready:
                  context: "SortableJS nested lists. Defined in Vision PDSA Section 6.2."
                  inputs:
                    - from: "ms-feat-graph-traversal"
                      type: "state"
                      description: "Tree rendering must work before drag-and-drop can be added"
                  status: "not_ready"
                definition_of_done:
                  action: "Add SortableJS drag-and-drop to the tree. Nodes can move between parents."
                  acceptance: "Drag a node from one parent to another. Node keeps its children and properties. References remain valid."
                  quality_gates:
                    - name: "Node moves between parents"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "Children preserved after move"
                      status: "pending"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "state"
                      description: "Dashboard supports node rearrangement"
                  status: "not_done"

              - id: "ms-feat-dor-dod-display"
                title: "Display DoR/DoD on each node"
                owner: "dev-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  # Specified in: Vision PDSA Section 4.2 (Self-Aware Node)
                definition_of_ready:
                  context: "Each node's intrinsic properties must be visible in the dashboard. Defined in Vision PDSA Section 4.2."
                  inputs:
                    - from: "ms-feat-graph-traversal"
                      type: "state"
                      description: "Tree rendering exists"
                  status: "not_ready"
                definition_of_done:
                  action: "Add expandable DoR/DoD panels to each node in the tree view."
                  acceptance: "Click a node to see its readiness inputs, completion criteria, quality gates, and outputs."
                  quality_gates:
                    - name: "DoR inputs shown with satisfaction status"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "DoD quality gates shown with pass/fail"
                      status: "pending"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "state"
                      description: "Dashboard shows self-aware node properties"
                  status: "not_done"

          # --- INFRASTRUCTURE (DEPRIORITIZED per Q17 — dashboard infra comes after MCP enforcement) ---
          - id: "ms-infrastructure"
            title: "Infrastructure (DEPRIORITIZED — dashboard infra comes after MCP enforcement)"
            owner: "dev-agent"
            type: "task"
            status: "pending"
            pdsa_phase: null
            pdsa_ref:
              git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
              local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
              # Specified in: Vision PDSA Section 3 (Mindspace Structure)
            definition_of_ready:
              context: "Infrastructure can begin when node schema is validated and features are specified. DEPRIORITIZED per Q17 (Vision PDSA Section 13.2): MCP enforcement first, dashboard infrastructure later."
              inputs:
                - from: "ms-node-schema"
                  type: "analysis"
                  description: "Finalized node schema"
                - from: "ms-features"
                  type: "analysis"
                  description: "Feature specifications"
              status: "not_ready"
            definition_of_done:
              action: "Build the tech stack, deploy, connect to MCP server."
              acceptance: "Dashboard accessible, MCP tools operational, data flowing."
              quality_gates:
                - name: "Dashboard serves from Hetzner"
                  status: "pending"
                  verifier: "dev-agent"
                - name: "MCP tools respond correctly"
                  status: "pending"
                  verifier: "pdsa-agent"
                - name: "Thomas can access and use the dashboard"
                  status: "pending"
                  verifier: "thomas"
              outputs:
                - type: "state"
                  description: "Running mindspace system"
              status: "not_done"
            children:

              - id: "ms-infra-tech-stack"
                title: "Tech stack (Hugo, Alpine.js, Tailwind, SortableJS)"
                owner: "dev-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref: null  # Existing v2 stack — no dedicated PDSA, reuses prior implementation
                definition_of_ready:
                  context: "Already deployed for v2 PM tool. Reuse existing infrastructure on Hetzner."
                  inputs: []
                  status: "ready"
                definition_of_done:
                  action: "Verify existing Hugo + Alpine.js setup still works. Extend if needed."
                  acceptance: "Hugo site builds, Alpine.js loads, Tailwind renders."
                  quality_gates:
                    - name: "Hugo build succeeds"
                      status: "pending"
                      verifier: "dev-agent"
                  outputs:
                    - type: "state"
                      description: "Working tech stack on Hetzner"
                  status: "not_done"

              - id: "ms-infra-data-migration"
                title: "Migrate v2 data to mindspace format"
                owner: "dev-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  # Specified in: Vision PDSA Section 10 (Migration Plan)
                definition_of_ready:
                  context: "v2 currentContext.yaml must be transformed to mindspace node schema. Migration plan in Vision PDSA Section 10."
                  inputs:
                    - from: "ms-node-schema"
                      type: "analysis"
                      description: "Finalized node schema to migrate into"
                  status: "not_ready"
                definition_of_done:
                  action: "Write migration script. Convert v2 phases/items/sub_items to recursive nodes with DoR/DoD."
                  acceptance: "All v2 data represented in mindspace format. No data loss."
                  quality_gates:
                    - name: "All v2 phases present as nodes"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "Quality gates preserved"
                      status: "pending"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "file"
                      description: "Migration script and migrated data"
                  status: "not_done"

      # =====================================================================
      # PROJECT 2: MCP SERVER (infrastructure layer)
      # =====================================================================
      - id: "mcp-server"
        title: "xpollination-mcp-server"
        owner: "orchestrator"
        type: "task"
        status: "active"
        pdsa_phase: "plan"
        pdsa_ref:
          git_url: "https://github.com/PichlerThomas/xpollination-mcp-server"
          local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server"
        definition_of_ready:
          context: "Vision PDSA Section 4.4 identifies the MCP server as the infrastructure layer. Thomas confirmed (Q16, Q18)."
          inputs:
            - from: "ms-vision"
              type: "file"
              description: "Approved vision PDSA with three-actor model"
              path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
          status: "ready"
        definition_of_done:
          action: "Extend MCP server with mindspace state machine, enforce node lifecycle, pass integration tests."
          acceptance: "MCP tools enforce state machine rules. No agent can bypass quality gates. Single server serves both content pipeline and mindspace."
          quality_gates:
            - name: "State machine API operational"
              status: "pending"
              verifier: "pdsa-agent"
            - name: "Content pipeline still works"
              status: "pending"
              verifier: "dev-agent"
            - name: "Thomas approves the system"
              status: "pending"
              verifier: "thomas"
          outputs:
            - type: "state"
              description: "MCP server with mindspace enforcement"
          status: "not_done"
        children:

          # --- REQUIREMENTS ---
          - id: "mcp-requirements"
            title: "Requirements"
            owner: "pdsa-agent"
            type: "task"
            status: "active"
            pdsa_phase: "plan"
            pdsa_ref:
              git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/blob/main/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
              local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
            definition_of_ready:
              context: "Vision PDSA approved. Three-actor model defines MCP server's new role. Grammar phase questions Q12-Q15 address open API decisions."
              inputs:
                - from: "ms-vision"
                  type: "file"
                  description: "Approved vision PDSA"
                  path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
              status: "ready"
            definition_of_done:
              action: "Answer all requirement questions for MCP server's infrastructure role."
              acceptance: "MCP Infra PDSA approved by Thomas. Zero-knowledge protocol defined."
              quality_gates:
                - name: "MCP Infra PDSA approved"
                  status: "pending"
                  verifier: "thomas"
                - name: "Zero-knowledge protocol documented"
                  status: "pending"
                  verifier: "pdsa-agent"
              outputs:
                - type: "analysis"
                  description: "Complete MCP server requirements"
              status: "not_done"
            children:

              - id: "mcp-infra-pdsa"
                title: "How does the MCP server become the infrastructure layer?"
                owner: "pdsa-agent"
                type: "pdsa-cycle"
                status: "active"
                pdsa_phase: "plan"
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/blob/main/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                definition_of_ready:
                  context: "Vision PDSA Section 4.4 defines the three-actor model. MCP server already has WorkflowEngine, SQLite, and MCP SDK."
                  inputs:
                    - from: "ms-vision"
                      type: "file"
                      description: "Vision PDSA with three-actor model"
                      path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  status: "ready"
                definition_of_done:
                  action: "Create PDSA defining MCP server's new role, API surface, state machine, and data model."
                  acceptance: "PDSA documents the full API surface, state machine lifecycle, and SQLite schema extension."
                  quality_gates:
                    - name: "API surface defined with TypeScript signatures"
                      status: "pass"
                      verifier: "pdsa-agent"
                    - name: "State machine lifecycle documented"
                      status: "pass"
                      verifier: "pdsa-agent"
                    - name: "SQLite schema extension defined"
                      status: "pass"
                      verifier: "pdsa-agent"
                    - name: "Thomas approves API design"
                      status: "pending"
                      verifier: "thomas"
                  outputs:
                    - type: "file"
                      description: "MCP server infrastructure PDSA"
                      path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  status: "not_done"

              - id: "mcp-zero-knowledge"
                title: "How do zero-knowledge agents interact with the state machine?"
                owner: "pdsa-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mindspace/blob/main/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mindspace/docs/pdsa/2026-02-02-UTC-1300.mindspace-vision.pdsa.md"
                  # Conceptual basis in: Vision PDSA Section 4.4 (Three-Actor Model)
                definition_of_ready:
                  context: "The three-actor model (Vision PDSA Section 4.4) says agents are zero-knowledge workers. Need to define the exact agent-to-MCP interaction protocol. Grammar phase questions Q25-Q29 (Area F) address this."
                  inputs:
                    - from: "mcp-infra-pdsa"
                      type: "file"
                      description: "MCP infrastructure PDSA with API surface"
                  status: "not_ready"
                definition_of_done:
                  action: "Define the protocol: how does an agent discover what work is available? How does it submit results? What happens on rejection?"
                  acceptance: "Protocol is clear enough that a dev agent with no process knowledge can follow it."
                  quality_gates:
                    - name: "Protocol walkthrough with dev agent persona"
                      status: "pending"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "analysis"
                      description: "Agent interaction protocol"
                  status: "not_done"

          # --- FEATURES ---
          - id: "mcp-features"
            title: "Features"
            owner: "pdsa-agent"
            type: "task"
            status: "active"
            pdsa_phase: null
            pdsa_ref:
              git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/blob/main/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
              local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
              # Features defined in: MCP Infra PDSA Section 3 (API Surface)
            definition_of_ready:
              context: "Content pipeline is complete. Mindspace features depend on MCP Infra PDSA approval."
              inputs:
                - from: "mcp-requirements"
                  type: "analysis"
                  description: "Approved MCP requirements"
              status: "not_ready"
            definition_of_done:
              action: "All MCP features implemented: content pipeline (done) + mindspace state machine API (pending)."
              acceptance: "Both content pipeline and mindspace tools operational."
              quality_gates:
                - name: "Content pipeline tools work"
                  status: "pass"
                  verifier: "dev-agent"
                - name: "Mindspace state machine API works"
                  status: "pending"
                  verifier: "pdsa-agent"
              outputs:
                - type: "state"
                  description: "All MCP features operational"
              status: "not_done"
            children:

              - id: "mcp-feat-content-pipeline"
                title: "Content pipeline (existing)"
                owner: "dev-agent"
                type: "task"
                status: "complete"
                pdsa_phase: "complete"
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/tree/main/docs/pdca"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdca"
                  # Historical PDSAs in docs/pdca/ (pre-2026-01-30 naming)
                definition_of_ready:
                  context: "Original MCP server purpose. All tools implemented."
                  inputs: []
                  status: "ready"
                definition_of_done:
                  action: "Implement crawl_trends, propose_topic, write_draft, fact_check, improve_draft, publish_post."
                  acceptance: "All tools functional. End-to-end pipeline works."
                  quality_gates:
                    - name: "All 8 MCP tools implemented"
                      status: "pass"
                      verifier: "dev-agent"
                    - name: "SQLite schema deployed"
                      status: "pass"
                      verifier: "dev-agent"
                  outputs:
                    - type: "state"
                      description: "Working content pipeline"
                  status: "done"

              - id: "mcp-feat-state-machine-api"
                title: "Mindspace state machine API (new)"
                owner: "dev-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/blob/main/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  # Specified in: MCP Infra PDSA Section 3 (API Surface)
                definition_of_ready:
                  context: "Requires MCP infrastructure PDSA approved and node schema finalized. API defined in MCP Infra PDSA Section 3."
                  inputs:
                    - from: "mcp-infra-pdsa"
                      type: "file"
                      description: "Approved MCP infrastructure PDSA"
                    - from: "ms-node-schema"
                      type: "analysis"
                      description: "Finalized node schema"
                  status: "not_ready"
                definition_of_done:
                  action: "Implement mindspace MCP tools: get_ready_nodes, submit_output, book_transition, create_node, set_focus."
                  acceptance: "All tools enforce state machine rules. No agent can bypass quality gates."
                  quality_gates:
                    - name: "get_ready_nodes returns only station-scoped nodes"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "book_transition rejects invalid transitions"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "submit_output validates against DoD"
                      status: "pending"
                      verifier: "pdsa-agent"
                    - name: "Integration test passes full lifecycle"
                      status: "pending"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "state"
                      description: "Working mindspace state machine via MCP tools"
                  status: "not_done"

          # --- INFRASTRUCTURE ---
          - id: "mcp-infrastructure"
            title: "Infrastructure"
            owner: "dev-agent"
            type: "task"
            status: "active"
            pdsa_phase: null
            pdsa_ref:
              git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/blob/main/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
              local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
              # Specified in: MCP Infra PDSA Section 5 (Data Model Extension)
            definition_of_ready:
              context: "Existing stack is operational. Extension depends on MCP Infra PDSA approval."
              inputs:
                - from: "mcp-infra-pdsa"
                  type: "file"
                  description: "Approved MCP infrastructure PDSA with schema and implementation phases"
              status: "not_ready"
            definition_of_done:
              action: "Extend infrastructure: SQLite schema, unit tests, deployment."
              acceptance: "All infrastructure components operational. Existing content pipeline unaffected."
              quality_gates:
                - name: "Schema migration clean"
                  status: "pending"
                  verifier: "dev-agent"
                - name: "Unit tests pass"
                  status: "pending"
                  verifier: "dev-agent"
              outputs:
                - type: "state"
                  description: "Extended MCP server infrastructure"
              status: "not_done"
            children:

              - id: "mcp-infra-existing"
                title: "Existing stack (Node.js, TypeScript, SQLite, MCP SDK)"
                owner: "dev-agent"
                type: "task"
                status: "complete"
                pdsa_phase: "complete"
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mcp-server"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server"
                  # Already built — reference is the repo itself
                definition_of_ready:
                  context: "Already built and deployed."
                  inputs: []
                  status: "ready"
                definition_of_done:
                  action: "MCP server runs, connects to Claude, all tools registered."
                  acceptance: "npm start succeeds. Claude can call MCP tools."
                  quality_gates:
                    - name: "Server starts without errors"
                      status: "pass"
                      verifier: "dev-agent"
                  outputs:
                    - type: "state"
                      description: "Running MCP server"
                  status: "done"

              - id: "mcp-infra-schema-extension"
                title: "SQLite schema extension for mindspace nodes"
                owner: "dev-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/blob/main/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/docs/pdsa/2026-02-02-UTC-1500.mcp-server-infrastructure-layer.pdsa.md"
                  # Specified in: MCP Infra PDSA Section 5 (Data Model Extension)
                definition_of_ready:
                  context: "MCP infrastructure PDSA Section 5 defines the schema. Implement it."
                  inputs:
                    - from: "mcp-infra-pdsa"
                      type: "file"
                      description: "Schema SQL from MCP infrastructure PDSA"
                  status: "not_ready"
                definition_of_done:
                  action: "Add mindspace_nodes, mindspace_node_inputs, mindspace_node_outputs, mindspace_quality_gates, mindspace_transitions, mindspace_scope_stack tables."
                  acceptance: "Schema applies cleanly. Existing content pipeline tables unaffected."
                  quality_gates:
                    - name: "Migration runs without errors"
                      status: "pending"
                      verifier: "dev-agent"
                    - name: "Existing tables still work"
                      status: "pending"
                      verifier: "pdsa-agent"
                  outputs:
                    - type: "file"
                      description: "Updated schema.sql"
                      path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/src/db/schema.sql"
                  status: "not_done"

              - id: "mcp-infra-unit-tests"
                title: "Unit tests for MCP server"
                owner: "dev-agent"
                type: "task"
                status: "pending"
                pdsa_phase: null
                pdsa_ref:
                  git_url: "https://github.com/PichlerThomas/xpollination-mcp-server/blob/main/CLAUDE.md"
                  local_path: "/home/developer/workspaces/github/PichlerThomas/xpollination-mcp-server/CLAUDE.md"
                  # Test requirements defined in: MCP server CLAUDE.md TODO section
                definition_of_ready:
                  context: "Tests defined in MCP server CLAUDE.md TODO section. 13 component tests + 1 e2e test."
                  inputs: []
                  status: "ready"
                definition_of_done:
                  action: "Write unit tests for all existing components."
                  acceptance: "All tests pass. Coverage > 80% for implemented tools."
                  quality_gates:
                    - name: "npm test passes"
                      status: "pending"
                      verifier: "dev-agent"
                  outputs:
                    - type: "file"
                      description: "Test files in src/**/*.test.ts"
                  status: "not_done"
